### â–¶ ç¥žç§˜çš„é”®å€¼è½¬æ¢ *

```py
class SomeClass(str):
    pass

some_dict = {'s':42}
```

**Output:**
```py
>>> type(list(some_dict.keys())[0])
str
>>> s = SomeClass('s')
>>> some_dict[s] = 40
>>> some_dict # expected: Two different keys-value pairs
{'s': 40}
>>> type(list(some_dict.keys())[0])
str
```

#### ðŸ’¡ è§£é‡Š:

* ç±»`s`å’Œå­—ç¬¦ä¸²`s`çš„å“ˆå¸Œå€¼æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸º`SomeClass`ç»§æ‰¿äº†`str`ç±»çš„`__hash__`æ–¹æ³•ã€‚
* `SomeClass("s") == "s"` ç­‰äºŽ`True`ï¼Œå› ä¸º`SomeClass`åŒæ ·ç»§æ‰¿äº†`str`ç±»çš„`__eq__`æ–¹æ³•ã€‚
* å› ä¸ºä¸¤ä¸ªå¯¹è±¡çš„å“ˆå¸Œå€¼(hash)å’Œå€¼(value)å…¨éƒ½ç›¸ç­‰,æ‰€ä»¥ä»–ä»¬åœ¨å­—å…¸çš„å…³é”®å­—(key)é‡Œæ˜¯è¢«è®¤ä¸ºç›¸åŒçš„ã€‚
* å¦‚æžœæƒ³è¦æ‰“åˆ°é¢„æœŸçš„æ•ˆæžœï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°å®šä¹‰`SomeClass`çš„`__eq__`æ–¹æ³•
  ```py
  class SomeClass(str):
    def __eq__(self, other):
        return (
            type(self) is SomeClass
            and type(other) is SomeClass
            and super().__eq__(other)
        )

    # å½“æˆ‘ä»¬è‡ªå®šä¹‰ __eq__ æ–¹æ³•åŽï¼Œ Pythonä¼šåœæ­¢
    # è‡ªåŠ¨ç»§æ‰¿ __hash__ æ–¹æ³•ï¼Œ æ‰€ä»¥æˆ‘ä»¬åŒæ ·ä¹Ÿéœ€è¦å®šä¹‰å®ƒ
    __hash__ = str.__hash__

  some_dict = {'s':42}
  ```

  **Output:**
  ```py
  >>> s = SomeClass('s')
  >>> some_dict[s] = 40
  >>> some_dict
  {'s': 40, 's': 42}
  >>> keys = list(some_dict.keys())
  >>> type(keys[0]), type(keys[1])
  (__main__.SomeClass, str)
  ```

---